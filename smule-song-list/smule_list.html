<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Smule: List of Songs</title>
  <link rel="icon" type="image/png" href="img/icon.png">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <link rel="stylesheet" href="../css/lumen.css">
</head>




<body>

<!-- CONTENT STUFF -->
<div class="container">
    <div class="row mb-2 mt-5">
        <div class="col-md-12">
          <div class="row no-gutters border rounded overflow-hidden flex-md-row mb-4 shadow-sm h-md-250 position-relative">
            <div class="col p-4 d-flex flex-column position-static">
              <h2 class="pb-3 pt-3 text-primary"><strong>All Songs in Smuleüé§</strong></h2>
              <div class="row">
                <div class="col">
                  
                  <!-- NAV BAR CONTENT-->
                  <ul class="nav nav-tabs">
                    <li class="nav-item">
                      <a class="nav-link active" data-toggle="tab" href="#home">Intro</a>
                    </li>
                    <li class="nav-item">
                      <a class="nav-link" data-toggle="tab" href="#extract">Extract & Clean-up</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" data-toggle="tab" href="#db_query">Load & Query</a>
                    </li>
                    <li class="nav-item">
                      <a class="nav-link" data-toggle="tab" href="#report">Report</a>
                  </li>
                  </ul>

                  <!-- Home -->
                  <div id="myTabContent" class="tab-content">
                    <div class="tab-pane fade active show" id="home">
                      <p><h5 class='text-secondary'><strong>Quick Background</strong></h5>
                        <a href="https://www.smule.com/" target="_blank">Smule</a> is a social singing app that I use to sing 
                        with other people around the world. I am quite active in it for various reason, but I wouldn't go so far to say that I am <a href="https://www.netflix.com/title/80198505" target="_blank">Retsuko</a> in real-life. 
                        My bestie does like to think that way though üòú</p>
                      <p><h5 class='text-secondary'><strong>Motivation</strong></h5>
                        <p>After singing togehter with the same people for a few years, I couldn't help thinking, <i class='text-danger'>'How many songs have we sung together in total? What have we sung so far?'</i> Unfortunately, Smule -just like any other social media- does not
                            really give you a year-end report like how you would get your credit card usage statementüòÇ</p>
                        <div class="row mb-3">
                          <div class="col-6">
                            <a><img class="rounded mx-auto d-block" src="asset/smule_page.PNG" alt="smule_page" width="85%"></a>
                          </div>
                          <div class="col-6">
                            <p>To get the songs listed on the page in Smule is quite endless. You have to scroll through the page. As you scroll down, the page will give more content until you hit the first song you have ever sung. 
                              Imagine there's over 1000s of songs on your page and the page shows only 25 at a time...and your internet suddenly crashes‚ò† <i>You get the idea, right?</i></p>
                            <p>Now let's say you were really passionate about finding the list of all songs and scrolled through those 100s of pages (FYI: Even I don't do that!), 
                              you will probably have to <i>copy + paste</i> the specific item on the page into some sort of a spreadsheet field by field and one by one.
                              You can pay an intern to do this for months. Or just let the code do it for youü§ì</p>
                            <p>Yes, I am very obssessed with getting those data! What could be better than using my own singing data to demonstrate my coding skills AND my personal life interest!?</p>
                            <h5 class='text-muted'><strong>Skills to show off</strong></h5>
                            <ul>
                              <li>Python: Libraries used include json, pandas and requests</li> 
                              <li>PostgreSQL: Database of my choice</li>
                              <li>SQL: Running queries</li>
                              <li>Jupyter notebook: Where I ran all my python code</li>
                            </ul>
                          
                          </div>
                        </div>
                        <p> <h5 class='text-secondary'><strong>Goal</strong></h5>
                        <p>I want to know what does my singing activity look like since I started using this app in 2016. ( ‚Ä¢ÃÄ œâ ‚Ä¢ÃÅ )‚úß</p>
                        <p>All this work just for that? YEAH!</p>
                        
                        <div class="row mb-2">
                            <div class="col-4">
                              <h5 class="text-center text-success">Blob of Info</h5>
                              <div class="text-center pb-2">
                              <a><img src="asset/json_blob.PNG" alt="json_blob" width="100%"></a>
                              </div>
                            </div>
                            <div class="col-8">
                              <div class="text-center pb-2">
                              <h5 class="text-center text-success">Nice Table</h5>
                              <a><img src="asset/song_table.png" alt="smule-song-table" width="100%"></a>
                              </div>
                            </div>
                        </div>
                        <p><i>I want to be respectful of my singing buddies' privacy, so I will redact everything that can trace back to them. All those years of working in clinical research and patient's confidentiality sure drilled me good with PII redaction skills</i> üòâ</p>

                    </div>
                    <!-- EXTRACT/Clean-up -->
                    <div class="tab-pane fade" id="extract">
                      <p><h5 class='text-secondary'><strong>Data Fishing</strong></h5> 
                      <p>Trying to get my hands on the data was actually the hardest part of this project. Here's my journey:</p>
                      <ul>
                        <li><i>Any API request? Nope... Okay, fine.</i></li> 
                        <li><i>No year-end report in any format? </i></li>
                        <li><i>Web scraping with BeautifulSoup (python): ...code can't be soupify...</i></li>
                        <li><i>Alright I'm gonna stop wasting time lamenting. Moving on..</i> MORE GOOGLE!</li>
                      </ul>
                      <p>From googling around, I finally got my hands on the URL where I can get the data I need in a json format. Bless those beautiful souls for sharing the URL on <a href="https://stackoverflow.com/questions/50074596/list-of-followers-and-recordings-of-smule" target="_blank"> stackoverflow</a> and
                        <a href="https://sing.salon/forums/topic/614-introducing-sing-insights-beta/" target="_blank"> Sing Salon</a>.</p>
                      <strong class='text-muted'>STARTER URL ACQUIRED</strong>‚ú®
                      <p class='text-success'>https://www.smule.com/s/profile/performance/&lt;username&gt;/sing?offset=&lt;#&gt;</p>  
                      <p><h5 class='text-secondary'><strong>Parsing-out JSON Object</strong></h5> 
                      <p>Let the cherry-picking begins!</p>
                      <div class="row mb-2">
                        <div class="col-6">
                          <div class="text-center pb-2">
                            <a><img src="asset/extract.PNG" alt="json_request" width="85%"></a>
                          </div>
                        </div>
                        <div class="col">
                          <div>
                            For my own purpose, I am only interested in the following filed:
                            <ul>
                              <li>"title"</li> 
                              <li>"artist" (looks like the song uploader didn't specify artist for this one)</li>
                              <li>"created_at"</li>
                              <li>"web_url"</li>
                              <li>"performed_by (not shown here)"</li>
                            </ul>
                            <p>I actually created a project on my GitHub that is dedicated for extracting data [and transforming too].</p>
                            <button type="button" class="btn btn-outline-warning"><a href="https://github.com/ckunakom/smule-song-list" target="_blank">Data Extraction Code!</a></button>
                            <p></p>
                            <p><i>I am intentionally redacting more than just the values, getting a bit paranoid</i> üòÖ</p>
                            <p></p>
                          </div>
                        </div>
                      </div>
                      <p><h5 class='text-secondary'><strong>Multiple Issues...</strong></h5> 
                      <p>Unfortunately, the code that I shared for Data Extraction does not always work on the first go. I was able to run the whole notebook in one-go
                        one day, the 2nd loop got an error on another. Also, each time I ran the code, I will have to wait at least 30 minutes before I ran the same <i>request</i> code and I would not be able to have access to Smule page for similar amount
                        (got a 418 Error Code). Until now, I still couldn't figure out how to bypass the rate limitation on making request for the json data. I added errors & exceptions which seemed to work, 
                        but later on gave the same result as the code without <i>try-except</i>. I tried adding <i>time.sleep(2)</i> and that didn't do anything either.
                      
                      <p>As a last resort, instead of making two requests (2 usernames, 2 URLs) in the same notebook I made only 1 request on just 1 username.
                        I exported the output to csv, waited 30 minutes to restart & rerun the code with the 2nd username, and exported that 2nd csv. Then, I appended 
                        the two dataframes and reset the index (need to do this for SQL database) before exporting that final dataframe to csv to be loaded. A whole set of jupyter notebooks were created for this alternative method.
                        <i>Yeah, I know. I AM obssessed with getting these data.</i> Imagine how many 30-min-wait time I had to do while debugging... üò≠ </p>
                      
                    <!-- Transform -->
                      <p><h5 class='text-secondary'><strong>Cleaning Up</strong></h5> 
                      <p>Most of the data returned is actually pretty clean, but I want the data to get spit out in a certain way. 
                        I tweaked the output of the two fields: date ("created_at") and web URL ("web_url"). 
                      <p>Instead of having the date and timestamp (stalkable metric right there üò±), I only want a return of just the date:<br>
                        <ul>
                          <li>"2020-08-16T20:54:36-07:00" ‚Üí "2020-08-16"</li>
                        </ul>
                      </p>
                      <p>The web URL returned is only part of the url. I want a full URL:<br>
                        <ul>
                          <li>"/recording/asca-koe-tv-size/ü§êü§êü§ê/" ‚Üí "https://www.smule.com/recording/asca-koe-tv-size/ü§êü§êü§ê/"</li>
                        </ul>
                      </p>
                      <p><h5 class='text-secondary'><strong>Extra Clean-up</strong></h5>
                      <p>I did an extra clean-up step to replace the real date with a fake one and to also replace the actual username with just '-username-' for demo purpose.</p>
                      <p><h5 class='text-secondary'><strong>Creating Dataframeüêº</strong></h5> 
                      <p>Once all the data is in the format I want, it's time for pandas to shine!</p>
                      <div class="text-center pb-2">
                        <a><img src="asset/transform.PNG" alt="transform_table" width="85%"></a>
                      </div>
                      <p><h5 class='text-secondary'><strong>Write to CSV</strong></h5> 
                      <p>I ran the code to import the dataframe to csv. <i>So I can show off my SQL querying skills!</i></p>
                      <strong class='text-muted'>NICE TABLE ACQUIRED</strong>‚ú®
                    </div>

                    <!-- Load & Query -->
                    <div class="tab-pane fade" id="db_query">
                      <!-- SQL schema -->
                      <p><h5 class='text-secondary'><strong>Setting up Database</strong></h5> 
                      <p>Again, I use postgreSQL as my database to run my SQL query. I created a database within pgAdmin before creating a table with the following code before I imported my csv:</p>
                      <a><img src="asset/load.PNG" alt="load_table" width="85%"></a>
                      <p>Once the data has been dumped, it's time to look at some numbers and make some decisions for the future!</p>
                      <p><h5 class='text-secondary'><strong>Query</strong></h5>
                      <p>Here are some of the simple queries I ran:</p>
                      <a><img src="asset/query.PNG" alt="query" width="600px"></a>
                    </div>

                    <!-- Report -->
                    <div class="tab-pane fade" id="report">
                      <p><h5 class='text-secondary'><strong>Results</strong></h5>
                        <p>Since the day I started singing (24-SEP-2016) until the date the data is extracted (12-SEP-2020), I have sung a total of <strong>1858</strong> songs.</p>
                        
                        <div class='row'>
                          <div class='col-4'></div>
                          <div class='col-4'>
                            <table class="table table-sm">
                              <thead class="thead-dark">
                                <tr>
                                  <th scope="col">Collaboration type</th>
                                  <th scope="col">Number of Songs</th>
                                </tr>
                              </thead>
                              <tbody>
                                <tr>
                                  <th scope="row">Inviting</th>
                                  <td>869</td>
                                </tr>
                                <tr>
                                  <th scope="row">Joining</th>
                                  <td>989</td>
                                </tr>
                              </tbody>
                            </table>
                                                    

                            <table class="table table-sm">
                              <thead class="thead-dark">
                                <tr>
                                  <th scope="col">Invitation Spawner</th>
                                  <th scope="col">Number of Songs</th>
                                </tr>
                              </thead>
                              <tbody>
                                <tr>
                                  <th scope="row">Buddy1</th>
                                  <td>110</td>
                                </tr>
                                <tr>
                                  <th scope="row">Buddy2</th>
                                  <td>56</td>
                                </tr>
                                <tr>
                                  <th scope="row">Buddy3</th>
                                  <td>54</td>
                                </tr>
                                <tr>
                                  <th scope="row">Buddy4</th>
                                  <td>44</td>
                                </tr>
                                <tr>
                                  <th scope="row">Buddy5</th>
                                  <td>39</td>
                                </tr>
                                <tr>
                                  <th scope="row">Buddy6</th>
                                  <td>36</td>
                                </tr>
                                <tr>
                                  <th scope="row">...</th>
                                  <td>...</td>
                                </tr>
                                <tr>
                                  <th scope="row">StrangerY</th>
                                  <td>1</td>
                                </tr>
                                <tr>
                                  <th scope="row">StrangerZ</th>
                                  <td>1</td>
                                </tr>
                              </tbody>
                            </table>
                          </div>

                          <p>There are 869 recordings I created, either a solo or a duet for others to join. I have joined others on 989 songs.</p>
                          <p>Out of those 989 songs, I have sung with <strong>185</strong> different smule-users. I sang as many as 100s songs with 1 person and as little as 1 song.</p>
                        </div>
                       
                        <div class='row'>
                          <p>Now, let's just look at my own singing activity for these past years:</p>
                        </div>

                        <div class='row'>
                          <div class='col-4'>
                            <table class="table table-sm">
                              <thead class="thead-light">
                                <tr>
                                  <th scope="col">Year</th>
                                  <th scope="col">Number of Songs</th>
                                </tr>
                              </thead>
                              <tbody>
                                <tr>
                                  <th scope="row">2016</th>
                                  <td>106</td>
                                </tr>
                                <tr>
                                  <th scope="row">2017</th>
                                  <td>746</td>
                                </tr>
                                <tr>
                                  <th scope="row">2018</th>
                                  <td>453</td>
                                </tr>
                                <tr>
                                  <th scope="row">2019</th>
                                  <td>327</td>
                                </tr>
                                <tr>
                                  <th scope="row">2020</th>
                                  <td>226</td>
                                </tr>
                              </tbody>
                            </table>
                          </div>
                          
                          <div class='col-8'>
                            <p>Yearly</p>
                            <ul>
                              <li>The most singing happens in 2017.</li>
                              <li>Though there are 106 songs in 2016, this is the amount sung within 4 months (start date is September)</li>
                              <li>The amount of singing declines in 2018 by almost 40% compared to the year 2017. </li>                        
                              <ul><li>Probably because I started a new job as a CRA -all the travelling and being K.O. when coming back from the work trip.
                                I remember being so wiped that I hardly had any energy to sing and spawn out invites during the weekend.
                              </li></ul>
                            </ul>
                          </div>
                        </div>

                        <div class='row'>
                          <div class='col-4'>
                            <table class="table table-sm">
                              <thead class="thead-light">
                                <tr>
                                  <th scope="col">Month</th>
                                  <th scope="col">Number of Songs</th>
                                </tr>
                              </thead>
                              <tbody>
                                <tr>
                                  <th scope="row">1</th>
                                  <td>203</td>
                                </tr>
                                <tr>
                                  <th scope="row">2</th>
                                  <td>182</td>
                                </tr>
                                <tr>
                                  <th scope="row">3</th>
                                  <td>152</td>
                                </tr>
                                <tr>
                                  <th scope="row">4</th>
                                  <td>148</td>
                                </tr>
                                <tr>
                                  <th scope="row">5</th>
                                  <td>173</td>
                                </tr>
                                <tr>
                                  <th scope="row">6</th>
                                  <td>186</td>
                                </tr>
                                <tr>
                                  <th scope="row">7</th>
                                  <td>159</td>
                                </tr>
                                <tr>
                                  <th scope="row">8</th>
                                  <td>139</td>
                                </tr>
                                <tr>
                                  <th scope="row">9</th>
                                  <td>116</td>
                                </tr>
                                <tr>
                                  <th scope="row">10</th>
                                  <td>143</td>
                                </tr>
                                <tr>
                                  <th scope="row">11</th>
                                  <td>139</td>
                                </tr>
                                <tr>
                                  <th scope="row">12</th>
                                  <td>118</td>
                                </tr>
                              </tbody>
                            </table>
                          </div>

                          <div class='col-8'>
                            <p>Monthly</p>
                            <ul>
                              <li>The frequency of singing fluctuates throughout the year, with most of the singing happens in January.</li>
                              <ul><li>This is likely because that is the coldest month in Minnesota and I  refused to leave my apartment for reasons other than work.</li></ul>
                              <ul><li>Similar trend, though a little lower, in February as a wave of short-lived spring invited my presence out.</li></ul>                        
                            </ul>
                            <p>Let's look at some of the songs that I sang most frequently next.</p>
                            <p>From looking at the resulted table, there are <strong>1071</strong> songs with unique titles. Note that some of the songs have the same name but because they have 
                            a unique title (depends on how the song being uploaded and whether it's acoustic, piano, guitar, etc.) within the app, they are being count separately.</p>
                            <p><a href="https://youtu.be/wtqib5i-Z6I" target="_blank">Sarishinohara</a> is pretty easy to sing and a very popular one, I could see why I sang it so much. 
                            <a href="https://youtu.be/6KNPNJHrv9I" target="_blank">Kokoronashi „ÄêShort.„Äë</a> is also popular, though the short version only. The note is pretty high! My favortie from 
                            these list is actually just <a href="https://youtu.be/o7mGDBYNXPo" target="_blank">HEAVEN</a> 
                            and <a href="https://youtu.be/M8KztgJ6ZYs" target="_blank">Shiwa</a>. <i>Oh, those URLs don't lead to my recording</i>ü§≠</p>
                          </div>
                        </div>
                    
                        <div class='row'>
                          <div class='col-4'>
                            <table class="table table-sm">
                              <thead>
                                <tr>
                                  <th scope="col">Song Title</th>
                                  <th scope="col">Frequency</th>
                                </tr>
                              </thead>
                              <tbody>
                                <tr>
                                  <td>Sarishinohara</td>
                                  <td>14</td>
                                </tr>
                                <tr>
                                  <td>Kokoronashi „ÄêShort.„Äë</td>
                                  <td>14</td>
                                </tr>
                                <tr>
                                  <td>Hitorinbo Envy</td>
                                  <td>9</td>
                                </tr>
                                <tr>
                                  <td>HEAVEN</td>
                                  <td>9</td>
                                </tr>
                                <tr>
                                  <td>Tokyo Teddy Bear</td>
                                  <td>8</td>
                                </tr>
                              </tbody>
                            </table>
                          </div>
                          <div class='col-4'>
                            <table class="table table-sm">
                              <thead>
                                <tr>
                                  <th scope="col">Song Title</th>
                                  <th scope="col">Frequency</th>
                                </tr>
                              </thead>
                              <tbody>
                                <tr>
                                  <td>Magnet</td>
                                  <td>8</td>
                                </tr>
                                <tr>
                                  <td>Shiwa („Åó„Çè) -Romaji-</td>
                                  <td>8</td>
                                </tr>
                                <tr>
                                  <td>Ai no Scenario (TV Size)</td>
                                  <td>8</td>
                                </tr>
                                <tr>
                                  <td>Zoetrope</td>
                                  <td>8</td>
                                </tr>
                                <tr>
                                  <td>Yomosugara Kimi Omou [Â§ú„ÇÇ„Åô„Åå„ÇâÂêõÊÉ≥„Åµ / Romaji]</td>
                                  <td>8</td>
                                </tr>
                              </tbody>
                            </table>
                          </div>
                          <div class='col-4'>
                            <table class="table table-sm">
                              <thead>
                                <tr>
                                  <th scope="col">Song Title</th>
                                  <th scope="col">Frequency</th>
                                </tr>
                              </thead>
                              <tbody>
                                <tr>
                                  <td>The immoral memory, The lost memory</td>
                                  <td>7</td>
                                </tr>
                                <tr>
                                  <td>only my railgun</td>
                                  <td>7</td>
                                </tr>
                                <tr>
                                  <td>Sayoko [Original]</td>
                                  <td>7</td>
                                </tr>
                                <tr>
                                  <td>WAVE</td>
                                  <td>7</td>
                                </tr>
                                <tr>
                                  <td>Acute</td>
                                  <td>7</td>
                                </tr>
                              </tbody>
                            </table>
                          </div>
                    </div>                    

                      <p><h5 class='text-secondary'><strong>Insight</strong></h5>
                      <p>That is a lot of singing, I guess? At this point, I can probably say I know how to sing over 1000 songs! <br>
                        And yes, I am quite an <i>otaku</i>, based on the types of songs I sing üòâ</p>                  
                    
                    </div>
                </div>
              </div> 
            </div>
          </div>
        </div>
        

</div>















    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.miJujubes carrot cake chocolate cake cupcake toffee cupcake pudding fruitcake chupa chups. Toffee lollipop cupcake. Danish caramels macaroon lemon drops candy canes.n.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    
    </body>
    
    </html>
           